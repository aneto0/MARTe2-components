
+Test = {
    Class = RealTimeApplication
    +Functions = {
        Class = ReferenceContainer

        +Sync = {
            Class = IOGAM
            InputSignals = {
                Counter = {
                    Type = uint32
                    DataSource = Timer
                    Frequency = 500
                }
                CounterADC = {
                    Alias = Counter
                    Type = uint64
                    DataSource = ADC
                }
                TimeADC = { 
                    Alias = Time
                    Type = uint64 
                    DataSource = ADC
                }                
                ADC0_0 = { 
                    Type = float32
                    Samples = 32
                    DataSource = ADC
                }
            }
            OutputSignals = {
                Counter = {
                    Type = uint32
                    DataSource = DDB1
                }
                CounterADC = {
                    Type = uint64
                    DataSource = Logger
                }
                TimeADC = {
                    Type = uint64
                    DataSource = Logger
                }                
                ADC0_0 = { 
                    Type = float32
                    NumberOfDimensions = 1
                    NumberOfElements = 32
                    DataSource = Logger
                }
            }
        }        
    }
    +Data = {
        Class = ReferenceContainer
        DefaultDataSource = DDB1
        +DDB1 = {
            Class = GAMDataSource
            AllowNoProducers = 1
        }
        +Timings = {
            Class = TimingDataSource
        }
        +Logger = {
            Class = LoggerDataSource
        }
        +Timer = {
            Class = LinuxTimer
            SleepNature = "Busy"
            SleepPercentage = 70
            ExecutionMode = "RealTimeThread"
            +TcnTimeProvider = {
                Class = IOExt::SystemClockTimeProvider
            }            
            Signals = {
                Counter = {
                    Type = uint32
                }
                Time = {
                    Type = uint32
                }
                AbsTime = {
                    Type = uint64
                }
                DeltaTime = {
                    Type = uint64
                }                   
            }
        }
        +ADC = {
            Class = NI6368::NI6368ADC
            SamplingFrequency = 6400
            ConvertFrequency = 1000000
            IsMultiplexed = 1
            DeviceName = "/dev/pxie-6363" 
            BoardId = 0
            SampleDelayDivisor = 2 
            ConvertDelayDivisor = 100 
            Calibrate = 1
            ExecutionMode = RealTimeThread
            //ExecutionMode = IndependentThread
            CPUs = 0x80
            Signals = {
                Counter = { 
                    Type = uint64
                    ResetOnBufferChange = 1
                }
                Time = { 
                    Type = uint64 
                }
                ADC0_0 = { 
                    Type = float32
                    InputRange = 10 
                    ChannelId = 0
                    InputMode = NRSE
                }
            }
        }
    }
    +States = {
        Class = ReferenceContainer
        +Idle = {
            Class = RealTimeState
            +Threads = {
                Class = ReferenceContainer
                +Thread1 = {
                    Class = RealTimeThread
                    CPUs = 0x10
                    Functions = { Sync }
                }
            }
        }
    }
    +Scheduler = {
        Class = GAMScheduler
        TimingDataSource = Timings
    }
}
